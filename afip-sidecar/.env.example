# ============================================================================
# BlendPOS — AFIP Sidecar Configuration
# ============================================================================
# 
# Este archivo contiene las variables de entorno necesarias para el 
# microservicio de integración con AFIP/ARCA.
#
# INSTRUCCIONES:
# 1. Copiar este archivo a `.env` en la misma carpeta
# 2. Completar los valores según su configuración
# 3. NUNCA commitear el archivo .env a git (está en .gitignore)
#
# ============================================================================

# ── CERTIFICADOS AFIP ─────────────────────────────────────────────────────────

# CUIT del emisor (contribuyente que emite facturas)
# Formato: solo números, sin guiones (ej: 20123456789)
AFIP_CUIT_EMISOR=20123456789

# Ruta al certificado X.509 (.crt)
# En Docker, montar como volumen en /certs
AFIP_CERT_PATH=/certs/afip.crt

# Ruta a la clave privada (.key)
AFIP_KEY_PATH=/certs/afip.key

# ── MODO DE OPERACIÓN ────────────────────────────────────────────────────────

# Modo homologación (testing) o producción
# true = Homologación (wsaahomo.afip.gov.ar)
# false = Producción (wsaa.afip.gov.ar)
# IMPORTANTE: Usar certificados diferentes para cada ambiente
AFIP_HOMOLOGACION=true

# ── SERVIDOR ──────────────────────────────────────────────────────────────────

# Puerto en el que escucha el sidecar (interno, no exponer públicamente)
AFIP_PORT=8001

# Directorio para cache de tokens WSAA
# El token de autenticación se guarda aquí (válido ~12h)
AFIP_CACHE_DIR=/tmp/afip_cache

# ── LOGGING ───────────────────────────────────────────────────────────────────

# Nivel de log: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# ============================================================================
# NOTAS IMPORTANTES
# ============================================================================
#
# 1. CERTIFICADOS DE HOMOLOGACIÓN:
#    - Obtener en: https://www.afip.gob.ar/ws/WSAA/certificado.asp
#    - Seleccionar "WSFE - Factura Electrónica" como servicio
#    - Generar CSR → Descargar .crt → Guardar .key
#    - CUIT de testing: 20409378472 (AFIP Testing)
#
# 2. CERTIFICADOS DE PRODUCCIÓN:
#    - Requiere trámite presencial en AFIP
#    - Debe estar asociado al CUIT del contribuyente real
#    - NO usar certificados de homologación en producción
#
# 3. SEGURIDAD:
#    - Los certificados .crt y .key son CRÍTICOS
#    - Guardarlos de forma segura (vault, secrets manager)
#    - En Docker, montar como volumen read-only
#    - Rotar anualmente según vencimiento de AFIP
#
# 4. MONITOREO:
#    - El token WSAA expira cada ~12 horas
#    - El sidecar se re-autentica automáticamente
#    - Revisar logs ante errores de autenticación
#
# ============================================================================
